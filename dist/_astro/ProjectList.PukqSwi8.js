import{t as Z,i as E,s as A,p as U,o as $,e as ee,a as te}from"./props.BBRIWhU4.js";import{t as h,c,r as v,a as y,s as S,b as f,d as re,p as W,i as B,g as b,e as F,f as w,l as J,h as t,n as ie,j as m,k as se}from"./render.LcNLTWLR.js";import{t as P,f as L,V as ae}from"./VideoLightbox.OA3f6PWi.js";/* empty css                       *//* empty css                       */var oe=h('<div class="project-title svelte-paf81o"> </div>');function ne(g,e){var r=oe(),j=c(r);v(r),y(()=>{Z(r,"active",e.isActive),S(j,`${e.title??""}${(e.subtitle?` â€¢ ${e.subtitle}`:"")??""}`)}),f(g,r)}var le=(g,e)=>{console.log("Thumbnail clicked!"),e.onClick()},ce=(g,e)=>g.key==="Enter"&&e.onClick(),ve=h('<iframe class="thumbnail svelte-lj7o2r" loading="lazy" width="100%" height="100%" frameborder="0" allowfullscreen="false"></iframe>'),de=h('<img class="thumbnail svelte-lj7o2r">'),ue=h('<div class="thumbnail-container svelte-lj7o2r" role="button" tabindex="0"><!></div>');function fe(g,e){W(e,!0);var r=ue();r.__click=[le,e],r.__keydown=[ce,e];var j=c(r);{var I=o=>{var i=ve();y(()=>{A(i,"src",`${e.project.gif}?background=true&autopause=true&autoplay=1&loop=1&byline=0&title=0&quality=720p`),A(i,"title",e.project.title)}),P(1,i,()=>L,()=>({duration:300})),P(2,i,()=>L,()=>({duration:300})),f(o,i)},k=o=>{var i=de();y(()=>{A(i,"src",e.project.gif),A(i,"alt",e.project.title)}),P(1,i,()=>L,()=>({duration:300})),P(2,i,()=>L,()=>({duration:300})),f(o,i)};E(j,o=>{e.project.gif?.includes("vimeo.com")?o(I):o(k,!1)})}v(r),y(()=>A(r,"style",`height: ${e.height??""}`)),f(g,r),B()}re(["click","keydown"]);var he=h('<div class="credit-line svelte-1l42eyk"><span class="credit-label svelte-1l42eyk">Director</span> <span class="credit-value svelte-1l42eyk"> </span></div>'),ge=h('<div class="credit-line svelte-1l42eyk"><span class="credit-label svelte-1l42eyk">Client</span> <span class="credit-value svelte-1l42eyk"> </span></div>'),pe=h('<div class="credit-line svelte-1l42eyk"><span class="credit-label svelte-1l42eyk">Agency</span> <span class="credit-value svelte-1l42eyk"> </span></div>'),be=h('<div class="credit-line svelte-1l42eyk"><span class="credit-label svelte-1l42eyk">Production</span> <span class="credit-value svelte-1l42eyk"> </span></div>'),je=h('<div class="credits svelte-1l42eyk"><!> <!> <!> <!></div>');function me(g,e){W(e,!0);var r=je(),j=c(r);{var I=s=>{var a=he(),l=b(c(a),2),u=c(l,!0);v(l),v(a),y(()=>S(u,e.project.director)),f(s,a)};E(j,s=>{e.project.director&&s(I)})}var k=b(j,2);{var o=s=>{var a=ge(),l=b(c(a),2),u=c(l,!0);v(l),v(a),y(()=>S(u,e.project.client)),f(s,a)};E(k,s=>{e.project.client&&s(o)})}var i=b(k,2);{var n=s=>{var a=pe(),l=b(c(a),2),u=c(l,!0);v(l),v(a),y(()=>S(u,e.project.agency)),f(s,a)};E(i,s=>{e.project.agency&&s(n)})}var C=b(i,2);{var _=s=>{var a=be(),l=b(c(a),2),u=c(l,!0);v(l),v(a),y(()=>S(u,e.project["production-company"])),f(s,a)};E(C,s=>{e.project["production-company"]&&s(_)})}v(r),P(1,r,()=>L,()=>({duration:300})),P(2,r,()=>L,()=>({duration:300})),f(g,r),B()}var _e=h("<!> <!>",1),ye=h('<div class="container svelte-qodcyq"><div class="project-list svelte-qodcyq"><!> <div class="project-sentinel svelte-qodcyq" id="project-sentinel"></div></div> <div class="media-wrapper"><!></div></div> <!>',1);function Pe(g,e){W(e,!0);const r=U(e,"projects",19,()=>[]),j=U(e,"scrollTriggerOffset",3,45),I=U(e,"thumbnailHeight",3,"60vh");let k=F(!1),o=F(w(j())),i=F(w(r())),n=F(0),C=F(!1);const _=[];function s(){t(n)>=0&&r()[t(n)].video&&m(C,!0)}function a(){m(C,!1)}$(()=>{const d=()=>{m(k,window.innerWidth<=768),m(o,w(t(k)?35:j()))};d(),window.addEventListener("resize",d),(()=>{const p=document.querySelectorAll(".project-title"),M=document.querySelector("#project-sentinel");p.forEach((T,O)=>{const H=new IntersectionObserver(R=>{R.forEach(D=>{D.isIntersecting&&D.intersectionRatio>.5&&m(n,w(O))})},{threshold:.5,rootMargin:`-${t(o)}% 0px -${t(o)}% 0px`});H.observe(T),_.push(H)});const z=new IntersectionObserver(T=>{T.forEach(O=>{O.isIntersecting&&m(n,-1)})},{threshold:.1,rootMargin:`-${t(o)}% 0px -${t(o)}% 0px`});M&&(z.observe(M),_.push(z))})();const x=p=>{console.log("Filtering projects...",p.detail.projects),m(i,w(p.detail.projects)),_.forEach(M=>M.disconnect()),_.length=0,m(n,w(t(i).length>0?0:-1)),setTimeout(()=>{document.querySelectorAll(".project-title").forEach((z,T)=>{const O=new IntersectionObserver(H=>{H.forEach(R=>{R.isIntersecting&&R.intersectionRatio>.5&&m(n,w(T))})},{threshold:.5,rootMargin:`-${t(o)}% 0px -${t(o)}% 0px`});O.observe(z),_.push(O)})},100)};return document.addEventListener("projectsFiltered",x),()=>{_.forEach(p=>p.disconnect()),window.removeEventListener("resize",d),document.removeEventListener("projectsFiltered",x)}});var l=ye(),u=J(l),V=c(u),K=c(V);ee(K,17,()=>t(i),te,(d,q,x)=>{const p=se(()=>t(n)===x);ne(d,{get title(){return t(q).title},get subtitle(){return t(q).subtitle},get isActive(){return t(p)}})}),ie(2),v(V);var G=b(V,2),N=c(G);{var Q=d=>{var q=_e(),x=J(q);fe(x,{get project(){return t(i)[t(n)]},get height(){return I()},onClick:s});var p=b(x,2);me(p,{get project(){return r()[t(n)]}}),f(d,q)};E(N,d=>{t(n)>=0&&t(i)[t(n)]&&d(Q)})}v(G),v(u);var X=b(u,2);{var Y=d=>{ae(d,{get videoUrl(){return r()[t(n)].video},onClose:a})};E(X,d=>{t(C)&&t(n)>=0&&d(Y)})}f(g,l),B()}export{Pe as default};
